- name: Install golang
  apt:
    name: "{{ packages }}"
  vars:
    packages:
    - golang

- name: Create go bin directory
  become: "{{ username }}"
  file:
    path: /home/{{ username }}/go/bin
    state: directory
    mode: '0750'
    owner: "{{ username }}"
    group: "{{ username }}"

- name: Install go dep
  become: "{{ username }}"
  shell: curl https://raw.githubusercontent.com/golang/dep/master/install.sh | sh
  args:
    warn: no
    creates: /home/{{ username }}/go/bin/dep
